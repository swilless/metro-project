<!DOCTYPE html>
<html>
  <head>
    <link type="text/css" rel="stylesheet" href="build/main.css">
    <title>MapMi</title>
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=yes" />
  </head>
  <body>
    <div class="outer-wrapper">
      <div class="main-content">
        <section class="main-header">
            <a href="#" title="Toggle main navigation" class="header-item main-nav-button"></a>
            <ul class="main-navigation load-hidden" id='main-nav'>
              <a class="clickable main-nav-item"><li class='list-item'>Line Status</li></a>
              <a class="clickable main-nav-item"><li class='list-item'>Route Planner</li></a>
              <a class="clickable main-nav-item"><li class='list-item'>Twitter</li></a>
              <a class="clickable main-nav-item"><li class='list-item'>Stats</li></a>
              <a class="clickable main-nav-item"><li class='list-item'>Settings</li></a>
            </ul>
            <a class="metro-logo header-item" href="/"></a>
            <a class="home-logo header-item" href="/"></a>
          </ul>
        </section>

        <section class="search">
          <input type="text" name="search" class="search-field" placeholder="Search">
        </section>
        <section class="main-body">
        </section>
        <section class="main-footer">
          <ul class="footer-nav-list">
            <li class="footer-item"><a title="Show Alerts" class="clickable button alerts" id="show-alerts"></a></li>
            <li class="footer-item"><a title="Show Favorites" class="clickable button favorites" id="show-favorites"></a></li>
            <li class="footer-item"><a title="Show Map" class="clickable button map" id="show-map"></a></li>
          </ul>
        </section>
      </div>
    </div>
    <div id="overlay"></div>
    <div id="map"></div>

    <script type="text/template" id="lines-view">
      <div class="lines-view">
        <ul class="lines-list">
          <% lines.forEach(function(line,i) {
            var lineClass = line.DisplayName.toLowerCase();
            %>
            <li class="list-item">
              <a class="clickable line-item metro-<%= lineClass %> " data-tab-number="<%= i %>" data-line-code="<%= line.LineCode %>" data-line-start="<%= line.StartStationCode %>" data-line-end="<%= line.EndStationCode %>"><%= line.DisplayName %></a>
            </li>
          <% }); %>
        </ul>
      </div>
    </script>

    <script type="text/template" id="stations-view">
      <div class="stations-section">
        <p>Select a station:</p>
        <ul class="station-list">
          <% stations.forEach(function(station,i) { %>
            <li class="list-item">
              <a class="clickable station-item" data-tab-number="<%= i %>" data-station-code="<%= station.Code %>"><%= station.Name %></a>
              <!-- anchors go to: href='/station/<%= station.Code %>' -->
            </li>
          <% }); %>
        </ul>
      </div>
    </script>

    <script type="text/template" id="favorites-view">
      <div class="favorites-item">
        <%
        var lineString = '';
        allLines.forEach(function(line,i) {
          lineString += line.displayName.toLowerCase() + '_';
        });
        lineString = lineString.substring(0, lineString.length - 1);
        %>
        <div class="fav-name"><a class="clickable fav-item get-routes" data-frequency="<%= frequency %>" data-alarm="<%= alarmTime %>" data-starting="<%= startingStation %>" data-ending="<%= destinationStation %>" data-line-colors="<%= lineString %>" data-transfer="<%= transferStation %>"><%= name %></a></div>
        <div class="fav-details">
          <!-- <span class="fav-starting col-xs-3">Starting: <%= startingStation %></span>
          <span class="fav-destination col-xs-3">Destination: <%= destinationStation %></span> -->
          <% if(alarmTime) { %>
            <span class="fav-alarm col-xs-3">Alarm: <%= alarmTime %></span>
          <% } %>
          <% if(frequency) { %>
            <span class="fav-frequency col-xs-3">Frequency: <%= frequency %></span>
          <% } %>
        </div>
        <div class="lineColors">
          Metro lines:
          <% allLines.forEach(function(line,i) {
            var lineDisplay = line.displayName.toLowerCase();
            %>
            <span class="line-color metro-<%= lineDisplay %>"></span>
          <% }); %>
        </div>
      </div>
    </script>

    <script type="text/template" id="trains-status-view">
      <ul class="trains-list">
          <li><span class="train-car column-heading col-xs-4">Number of cars</span><span class="train-destination column-heading col-xs-4">Destination</span><span class="train-minutes column-heading col-xs-4">Minutes</span></li>
        <% trains.forEach(function(train,i) { %>
          <li class="train-item">
            <span class="train-car col-xs-4"><%= train.Car %></span> <span class="train-destination col-xs-4"><%= train.DestinationName %></span> <span class="train-minutes col-xs-4"><%= train.Min %></span>
          </li>
        <% }); %>
      </ul>
    </script>

    <script type="text/template" id="alerts-view">
      <ul class="alerts-list">
        <% if(incidents){
          incidents.forEach(function(incident,i) { %>
          <li class="alert-item">
            <span class="alert-line <%= incident.IncidentType %>"><%= incident.LinesAffected %></span>
            <p class="alert-description"><%= incident.Description %></p>
            <span class="alert-datetime"><%= incident.DateUpdated %></span>
          </li>
        <% });
        } %>
      </ul>
    </script>

    <script type="text/template" id="template-routesview">
      <div class="routes-view">
        <div class="startingStation">
          <span class="line-code-<%= startingStation.lineCode %>">Starting Station: <%= startingStation.name %> </span>
        </div>
        <div class="destinationStation">
          <span class="line-code-<%= endingStation.lineCode %>">Destination Station: <%= endingStation.name %> </span>
        </div>
        <div class="routesDetails">
          <span class="alarm">Alarm time: <%= alarm %></span>
          <span class="frequency">Repeat: <%= frequency %></span>
        </div>
        <div class="time-table">
          <span class='current-time'><%= currentTime %></span>
          <span class='next-increment-time'><%= nextIncrement %></span>
          <span class='last-increment-time'><%= lastIncrement %></span>
        </div>
      </div>
    </script>


    <script type="text/template" id="template-overlayview">
      <div class="overlay-subview"></div>
    </script>

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.3.3/underscore-min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/backbone.js/0.9.2/backbone-min.js"></script>
    <script type="text/javascript" src="build/async.min.js"></script>
    <!-- <script src="//cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js"></script> -->
    <!-- <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script> -->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBmm323W-aHs6dMrjx3ySWDch7_66fvXS4&callback=initMap"
    async defer></script>
    <script src="build/main.js"></script>
  </body>
</html>
